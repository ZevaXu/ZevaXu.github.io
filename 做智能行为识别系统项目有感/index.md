# 做智能行为识别系统项目有感


## 记录最近做的一个项目过程中得到的一点体会

### 背景：

应导师要求，需要做一个基于人体行为识别的项目，主要目标是通过对比示范动作和错误动作图片或视频，找到错误动作的具体错误部位，并给出一些可视化的反馈和文字提示，帮助纠正动作，设想的落地方向是在健身运动行业。

拿到手之后，通过各个渠道收集相关资料，以及和同学的多方探讨，慢慢设想出一条大致可行的方案，于是着手编码开始实现，在实现过程中，通过在数据集上的不断测试效果，又前后推翻和修正了不少的想法。到今天，算是初步给出了一个可以交代的方案，这里不讲具体的方案实现过程，就将将在整个编码实现过程中得到的一些体会。

### 体会：

**写而不思则惘**

这里的写是写代码的意思。写而不思则惘：

1. 意思是动手之前一定要先充分理解问题，在脑子里勾勒出一个大致的方案
    * 完成这个方案大致需要哪些步骤（函数接口）
    * 对这些函数如何划分功能、解耦合
2. 具体到写某个函数接口时，也要大致从这几个方面考虑好
    * 该函数的功能
    * 该函数接收的输入
    * 该函数产生的输出
    * 里面的逻辑怎么写才能用较少的内存、较少的循环、美观易于理解
    * 函数可重用性的考虑
    * 函数的可扩充性

在这点上，我就吃了不少亏，由于编码之前没有经过精心的设计和考虑，导致代码多次重构，一部分重构是因为最后识别的效果不太好，不满足预期，于是结合实际情况深思熟虑，不断调整现有的方案，调整代码。这就导致项目中百分之70到80的代码重写，前期的工作时间大量浪费。



**好记性不如烂笔头**

计算一个复杂的数学题，计算过程中，脑子既要不断思考，也要不断记忆思考过程中产生的“缓存文件”，如果脑容量不足，很快就会卡机，这时就需要通过笔记来记录这些缓存拉。所以，在思考、编码的过程中，一定要做好记录。可以记录过程中的随时产生的灵感和想法；也可以记录待办事项，把规划好但是还没实现的函数或者功能记录下来，作为下一步的工作目标。实测这样能大大提高效率。



**思而不写则怠**

于是乎，在写每个函数后，我都经过一段时间的思考，但是呢，可能由于想久了费脑筋，容易偷懒，就想别的事情去了。并且有些函数可能本身逻辑就有点复杂，一时间没办法在脑海里把方方面面构思清楚。这时不管怎样，尝试一下动手，在编码实现过程中，可能就慢慢理清了思路。



### 遇到的问题与努力的方向

这个项目是用python写的，主要分为对图片的处理和对视频的处理，对图片处理很快也没太大问题，但是当处理视频时，由于存在一个不断读取和处理视频帧的循环，程序运行过程中，有一个严重的内存溢出问题。查资料、修改代码（面对对象方法改到函数式编程）、细致调试，最后发现是一个模块导入的问题，就是一行代码出错，却让我花了很多时间排查。但是同时也看到了自己薄弱的地方，一是对pytho面向对象编码知识点不熟悉，二是对更低层的东西项内存溢出、垃圾回收等机制不够了解。






